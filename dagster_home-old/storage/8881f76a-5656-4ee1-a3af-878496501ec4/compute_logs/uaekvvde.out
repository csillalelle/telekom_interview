[2025-07-03 01:38:42] training_pipeline_job - 8881f76a-5656-4ee1-a3af-878496501ec4 - tune - Starting model tuning process
[2025-07-03 01:38:42] training_pipeline_job - 8881f76a-5656-4ee1-a3af-878496501ec4 - tune - Loading processed features and labels from database
[2025-07-03 01:38:42] training_pipeline_job - 8881f76a-5656-4ee1-a3af-878496501ec4 - tune - Loaded 22821 feature records
[2025-07-03 01:38:42] training_pipeline_job - 8881f76a-5656-4ee1-a3af-878496501ec4 - tune - All columns in features_df: ['rating_account_id', 'customer_id', 'age', 'contract_lifetime_days', 'remaining_binding_days', 'has_special_offer', 'is_magenta1_customer', 'available_gb', 'gross_mrc', 'has_done_upselling', 'completion_rate', 'is_bounded', 'is_huawei', 'is_oneplus', 'is_samsung', 'is_xiaomi', 'is_iphone', 'n_contracts_per_customer', 'avg_monthly_usage_gb', 'total_usage_gb', 'max_monthly_usage_gb', 'months_with_roaming', 'ever_used_roaming', 'active_usage_months', 'months_with_no_delta_1mo_change', 'avg_delta_2mo', 'delta_2mo_volatility', 'max_delta_2mo_increase', 'max_delta_2mo_decrease', 'months_with_delta_2mo_increase', 'months_with_no_delta_2mo_change', 'months_with_delta_3mo_increase', 'months_with_no_delta_3mo_change', 'last_1_delta_1mo', 'last_2_delta_1mo', 'last_3_delta_1mo', 'last_1_delta_2mo', 'last_2_delta_2mo', 'last_1_delta_3mo', 'n_rechnungsanfragen', 'n_produkte_services_tarifdetails', 'n_prolongation', 'n_produkte_services_tarifwechsel', 'days_since_last_rechnungsanfragen', 'days_since_last_produkte_services_tarifdetails', 'days_since_last_prolongation', 'days_since_last_produkte_services_tarifwechsel', 'times_in_p1', 'times_in_p2', 'times_in_p3', 'times_in_p4', 'times_in_p5', 'created_at']
[2025-07-03 01:38:42] training_pipeline_job - 8881f76a-5656-4ee1-a3af-878496501ec4 - tune - Excluded columns: ['rating_account_id', 'customer_id', 'has_done_upselling', 'created_at']
[2025-07-03 01:38:42] training_pipeline_job - 8881f76a-5656-4ee1-a3af-878496501ec4 - tune - Feature columns (49): ['age', 'contract_lifetime_days', 'remaining_binding_days', 'has_special_offer', 'is_magenta1_customer', 'available_gb', 'gross_mrc', 'completion_rate', 'is_bounded', 'is_huawei', 'is_oneplus', 'is_samsung', 'is_xiaomi', 'is_iphone', 'n_contracts_per_customer', 'avg_monthly_usage_gb', 'total_usage_gb', 'max_monthly_usage_gb', 'months_with_roaming', 'ever_used_roaming', 'active_usage_months', 'months_with_no_delta_1mo_change', 'avg_delta_2mo', 'delta_2mo_volatility', 'max_delta_2mo_increase', 'max_delta_2mo_decrease', 'months_with_delta_2mo_increase', 'months_with_no_delta_2mo_change', 'months_with_delta_3mo_increase', 'months_with_no_delta_3mo_change', 'last_1_delta_1mo', 'last_2_delta_1mo', 'last_3_delta_1mo', 'last_1_delta_2mo', 'last_2_delta_2mo', 'last_1_delta_3mo', 'n_rechnungsanfragen', 'n_produkte_services_tarifdetails', 'n_prolongation', 'n_produkte_services_tarifwechsel', 'days_since_last_rechnungsanfragen', 'days_since_last_produkte_services_tarifdetails', 'days_since_last_prolongation', 'days_since_last_produkte_services_tarifwechsel', 'times_in_p1', 'times_in_p2', 'times_in_p3', 'times_in_p4', 'times_in_p5']
[2025-07-03 01:38:42] training_pipeline_job - 8881f76a-5656-4ee1-a3af-878496501ec4 - tune - Using 49 features for training
[2025-07-03 01:38:42] training_pipeline_job - 8881f76a-5656-4ee1-a3af-878496501ec4 - tune - Dataset shape: X=(22821, 49), y=(22821,)
[2025-07-03 01:38:42] training_pipeline_job - 8881f76a-5656-4ee1-a3af-878496501ec4 - tune - Target distribution: [21216  1605]
[2025-07-03 01:38:42] training_pipeline_job - 8881f76a-5656-4ee1-a3af-878496501ec4 - tune - Train set: (18256, 49), Test set: (4565, 49)
[2025-07-03 01:38:42] training_pipeline_job - 8881f76a-5656-4ee1-a3af-878496501ec4 - tune - Starting hyperparameter tuning with Optuna
[2025-07-03 01:40:27] training_pipeline_job - 8881f76a-5656-4ee1-a3af-878496501ec4 - tune - Hyperparameter tuning completed with 10 trials
[2025-07-03 01:40:27] training_pipeline_job - 8881f76a-5656-4ee1-a3af-878496501ec4 - tune - Best CV score: 0.1564
[2025-07-03 01:40:27] training_pipeline_job - 8881f76a-5656-4ee1-a3af-878496501ec4 - tune - Best parameters: {'n_estimators': 646, 'max_depth': 11, 'min_samples_split': 18, 'min_samples_leaf': 1, 'min_weight_fraction_leaf': 0.04926916524036562, 'max_features': 'sqrt', 'max_samples': 0.656333499081504, 'max_leaf_nodes': 982, 'class_weight': 'balanced_subsample'}
[2025-07-03 01:40:27] training_pipeline_job - 8881f76a-5656-4ee1-a3af-878496501ec4 - tune - Training final model with best parameters
[2025-07-03 01:40:33] training_pipeline_job - 8881f76a-5656-4ee1-a3af-878496501ec4 - tune - Model training completed successfully
[2025-07-03 01:40:33] training_pipeline_job - 8881f76a-5656-4ee1-a3af-878496501ec4 - tune - Tuning completed - CV F1 Score: 0.1564
